#! /usr/bin/env python

from __future__ import print_function

import os
import sys

data = {
    '3.1.0-M02': {
        'community': {
            'sha': '3b1da508a4c731ae29b9983ab489665f00e4c46635844f1fe30edad343fc3ea7'
        },
        'enterprise': {
            'sha': '5ab266109e44aa7792ab5001477724a435545c9611986a1cc02028ca3edb685f'
        }
    },
    '3.0.2': {
        'community': {
            'sha': '3daac469e0ad0f74eb8532ada8019b418e6ebd88da9bac52a4ee3393e18086aa'
        },
        'enterprise': {
            'sha': '7e3cb1cb29c51ac267e57ec3d12c425bd31a4c92a2ecba70bb78360670b4b972'
        }
    },
    'dev': {
        'dev': {
            'version': os.environ['DEV_VERSION'],
            'edition': os.environ['DEV_EDITION'],
            'sha': os.environ['DEV_SHA'],
            'root': 'file:///docker-test/',
            'inject': 'COPY ./neo4j-package.tar.gz /docker-test/$NEO4J_TARBALL',
        }
    }
}

for version, editions in data.items():
    for edition, details in editions.items():
        if not 'version' in details:
            details['version'] = version
        if not 'edition' in details:
            details['edition'] = edition
        if not 'root' in details:
            details['root'] = 'http://dist.neo4j.org'
        if not 'inject' in details:
            details['inject'] = ''

tag = os.environ['TAG']
detail = sys.argv[1]

if tag == 'dev':
    version = 'dev'
    edition = 'dev'
elif tag.endswith('-enterprise'):
    version = tag.replace('-enterprise', '')
    edition = 'enterprise'
else:
    version = tag
    edition = 'community'

print(data[version][edition][detail])
